controller:
  image:
    tag: "lts"

  installPlugins:
    - docker-workflow:1.28
    - workflow-aggregator:2.7
    - git:4.11.0
    - credentials:1144.v76b_089ccd026
    - credentials-binding:1.27
    - blueocean:1.25.0

  sidecars:
    dind:
      image: docker:24-dind
      securityContext:
        privileged: true
      args:
        - --host=tcp://localhost:2375
        - --host=unix:///var/run/docker.sock
      env:
        - name: DOCKER_TLS_CERTDIR
          value: ""
      volumeMounts:
        - name: docker-graph-storage
          mountPath: /var/lib/docker

  volumes:
    - name: docker-graph-storage
      emptyDir: {}
    - name: docker-binary
      emptyDir: {}

  initContainers:
    - name: install-docker-cli
      image: alpine:3.19
      command:
        - sh
        - -c
        - |
          apk add --no-cache docker-cli
          cp /usr/bin/docker /binary/docker
      volumeMounts:
        - name: docker-binary
          mountPath: /binary

  containerEnv:
    - name: PATH
      value: "/binary:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

  adminUser: admin
  adminPassword: admin
